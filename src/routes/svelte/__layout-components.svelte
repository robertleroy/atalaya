<script>
	import { page } from '$app/stores';
	import { svelteNav, componentsNav, sidebarOpen } from '$lib/stores/store';
	import { titlecase } from '$lib/stores/filters';

  const closeSidebar = () => sidebarOpen.set(false); 
</script>


<aside class="side-bar" class:sidebarOpen={$sidebarOpen}>
  <nav class="side-nav">
    
    <h4 class="sidenav-header"  class:active={$svelteNav.url === $page.url.pathname}>
      <a href="{$svelteNav.url}/">{titlecase($svelteNav.title)}</a>
    </h4>
    
    {#each $svelteNav.routes as {name, url, routes}}
    <div class="sidenav-item" on:click={closeSidebar} 
    class:active={$page.url.pathname.includes(url) ? true : false}>
      <a href={url}>{titlecase(name)}</a>
    </div>

      {#if name === 'Components'}
      <nav class="nestedNav">
        {#each routes as {name, url}}
        <div class="dbl-sidenav-item" on:click={closeSidebar} 
          class:active={url === $page.url.pathname}>
          <a href={url}>{titlecase(name)}</a>
        </div>
        {/each}
      </nav>
      {/if }
      
    {/each}
  </nav>
</aside>

<section class="page">
  <article class="content">
    <slot />
  </article>
</section>
